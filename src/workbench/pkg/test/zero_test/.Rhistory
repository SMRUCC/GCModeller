load("C:/Users/Administrator/Desktop/msDatabase_hilic0.0.2.rda")
spectra = msDatabase_hilic0.0.2@spectra.data
spectra
saveRDS(spectra, file = "./spectra.rds")
spectra <- readRDS("~/spectra.rds")
spectra <- readRDS("~/spectra.rds")
lib.pos = spectra$Spectra.positive
lib.neg = spectra$Spectra.negative
save(lib.pos, lib.neg, file = "./spectra.rda")
load("~/spectra.rda")
load("~/spectra.rda")
help(paste)
paste(c(1,2,3), c(5,6))
paste(c(1,2,3), c(5,6), sep = "+")
paste(c(1,2,32,34,23,1,23,4,3), c(1,5,6), sep = "+")
paste(c(1,2,32,34,23,1,23,4,3,1), c(1,5,6), sep = "+")
c(1,2,3,4) + c(1,2,3)
help(apply)
a = data.frame(cx = 1:8, cy = 99, cz = 8:(8+8))
a = data.frame(cx = 1:9, cy = 99, cz = 8:(8+8))
a
apply(a, MARGIN = 1, function(x) x)
apply(a, MARGIN = 1, function(x) print(x))
apply(a, MARGIN = 1, function(x) str(x))
a
apply(a, MARGIN = 1, function(x) sum(x))
5/0
log(0)
0/0
help(.Machine)
help(pdf)
help(svg)
help(writeLines)
help(writeLines)
help("sink")
SCA_scRNASEQ_TISSUE_FETAL_LIVER <- readRDS("G:/SCA_scRNASEQ_TISSUE_FETAL_LIVER.RDS")
SCA_scRNASEQ_TISSUE_FETAL_LIVER <- readRDS("G:/SCA_scRNASEQ_TISSUE_FETAL_LIVER.RDS")
install.packages("SeuratObject")
SCA_CyTOF_TISSUE_WHOLE_BLOOD_SDY1389_Whole_Blood <- readRDS("G:/Erica/test/SCA_CyTOF_TISSUE_WHOLE_BLOOD_SDY1389_Whole_Blood.RDS")
install.packages("Matrix")
install.packages("NMF")
library(NMF)
install.packages ("Biobase")
if (!require("BiocManager", quietly = TRUE))
install.packages("BiocManager")
BiocManager::install("Biobase")
BiocManager::install("Biobase")
BiocManager::install("Biobase")
BiocManager::install("Biobase")
BiocManager::install("Biobase")
BiocManager::install("BiocGenerics")
BiocManager::install("BiocGenerics")
BiocManager::install("BiocGenerics")
BiocManager::install("BiocGenerics")
help("sys.on.exit")
browser()
a=1
b=2
browser()
a
system.exit
exit
# 假设我们有一个函数，我们怀疑它在处理某些输入时会出错
my_function <- function(x) {
y <- x * 2
browser() # 进入调试模式
z <- y + 10
return(z)
}
my_function(5)
ls()
x
x==6
ls()
ls()
z
data_matrix <- matrix(rnorm(100), nrow=10)
rownames(data_matrix) <- paste("Metabolite", 1:10)
colnames(data_matrix) <- paste("Sample", 1:10)
data = data_matrix
data
ranks <- apply(data, 2, rank, ties.method = "average")
ranks
avg_ranks <- rowMeans(data[ranks])
avg_ranks <- rowMeans(ranks)
avg_ranks
normalized_data <- matrix(avg_ranks, nrow = nrow(data), byrow = TRUE)
normalized_data
for (i in 1:ncol(data)) {
normalized_data[, i] <- normalized_data[, i][order(ranks[, i])]
}
for (i in 1:ncol(data)) {
normalized_data[, i] <- data[, i][order(ranks[, i])]
}
for (i in 1:ncol(data)) {
print( data[, i][order(ranks[, i])])
}
ranks <- apply(data, 2, rank, ties.method = "average")
ranks
avg_ranks <- rowMeans(data[ranks])
avg_ranks <- apply(ranks, 1, function(x) mean(data[x]))
avg_ranks
normalized_data <- matrix(avg_ranks, nrow = nrow(data), byrow = TRUE)
normalized_data
for (i in 1:ncol(data)) {
normalized_data[, i] <- normalized_data[, i][order(ranks[, i])]
}
normalized_data <- matrix(avg_ranks, nrow = nrow(data), ncol = ncol(data), byrow = FALSE)
normalized_data
avg_ranks
for (i in 1:ncol(data)) {
normalized_data[, i] <- normalized_data[order(ranks[, i]), i]
}
normalized_data
data_matrix <- matrix(rnorm(100), nrow=10)
rownames(data_matrix) <- paste("Metabolite", 1:10)
colnames(data_matrix) <- paste("Sample", 1:10)
# 打印原始数据矩阵
print("Original Data Matrix:")
print(data_matrix)
data = data_matrix
ranks <- apply(data, 2, rank, ties.method = "average")
# 计算排序后的平均值
avg_ranks <- apply(ranks, 1, function(x) mean(data[x]))
avg-ranks
avg_ranks
normalized_data <- matrix(avg_ranks, nrow = nrow(data), ncol = ncol(data), byrow = FALSE)
normalized_data
install.packages("C:/Users/Administrator/Downloads/caret_7.0-1.zip", repos = NULL, type = "win.binary")
require(caret)
install.packages("recipes")
install.packages("recipes")
install.packages("recipes")
install.packages("recipes")
install.packages("recipes")
install.packages("recipes")
install.packages("C:/Users/Administrator/Downloads/recipes_1.2.1.zip", repos = NULL, type = "win.binary")
install.packages("recipes")
library(caret)
install.packages("caret")
library(caret)
BiocManager::install("rms")
BiocManager::install("rms")
install.packages("rms")
install.packages("Hmisc")
library(rms)
install.packages("survival")
install.packages(c("lattice", "mgcv"))
BiocManager::install()
BiocManager::install("3.21")
str(BiocManager::install)
BiocManager::install(version = "3.21")
update.packages()
library(rms)
install.packages("SparseM")
library(rms)
install.packages("quantreg")
library(rms)
install.packages("polspline")
library(rms)
install.packages("multcomp")
install.packages("rms")
library(rms)
library(survival)
data = read.csv("../Premature Birth Prediction Model-trainData.csv",row.names = NULL, check.names = FALSE);
BiocManager::install("clusterProfiler")
library(tidyverse);
library(ggplot2);
library(openxlsx);
library(paletteer);
library(egg);
library(ggrepel);
library(ggprism);
library(tidyverse);
library(ggplot2);
library(openxlsx);
library(paletteer);
library(egg);
library(ggrepel);
library(ggprism);
install.packages("ggprism")
library(tidyverse);
library(ggplot2);
library(openxlsx);
library(paletteer);
library(egg);
library(ggrepel);
library(ggprism);
library(ggsignif);
library(rstatix);
library(ggpubr);
library(stringr);
require(xcms)
BiocManager::install("xcms")
require(xcms)
# install.packages("paletteer")
library(paletteer);
# install.packages("ggplot2")
library(ggplot2);
ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
geom_point() +
scale_color_paletteer_d("nord::aurora");
# install.packages("paletteer")
library(paletteer);
# install.packages("ggplot2")
library(ggplot2);
ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
geom_point() +
scale_color_paletteer_d("ggthemes::excel_Slipstream");
a = read.csv("Z:\\mapping_1.csv")
a
clear
a = read.csv("Z:\\mapping_1.csv")
str(a)
a$biodeep_id
require(ggplot2)
scale_size_continuous
help(scale_size_continuous)
help(scale_color_brewer)
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
source("G:/temp/peptides.R")
help(warning)
warning(122)
warning(122, immediate.=TRUE)
BiocManager::install("DESeq2")
# 加载所需包
library(limma)
library(ggplot2)
# 1. 创建模拟数据（根据用户输入）
expr <- matrix(rnorm(1000 * 4, mean = 10), nrow = 1000,
dimnames = list(paste0("Gene", 1:1000), NULL))
expr[1:10, 3:4] <- expr[1:10, 3:4] + 12  # 前10个基因在处理组上调
groups <- c("Control", "Control", "Treat", "Treat")
# 2. 数据预处理
# 对数转换（避免负值）
expr_log <- log2(expr + 1)
# 标准化处理
expr_norm <- normalizeBetweenArrays(expr_log, method = "quantile")
# 3. 构建分组矩阵
design <- model.matrix(~0 + factor(groups))
colnames(design) <- c("Control", "Treat")
rownames(design) <- colnames(expr)
# 4. 构建比较矩阵
contrast_matrix <- makeContrasts(Treat_vs_Control = Treat - Control, levels = design)
# 5. 线性模型拟合
fit <- lmFit(expr_norm, design)
fit2 <- contrasts.fit(fit, contrast_matrix)
fit2 <- eBayes(fit2)
# 6. 提取差异表达结果
DEG_results <- topTable(fit2,
number = Inf,
adjust.method = "BH",
sort.by = "P")
# 7. 标记显著差异基因
DEG_results$Significant <- ifelse(
DEG_results$adj.P.Val < 0.05 & abs(DEG_results$logFC) > 1,
ifelse(DEG_results$logFC > 1, "Up", "Down"),
"Not Significant"
)
# 8. 可视化：火山图
ggplot(DEG_results, aes(x = logFC, y = -log10(P.Value), color = Significant)) +
geom_point(alpha = 0.6) +
scale_color_manual(values = c("Down" = "blue", "Not Significant" = "grey", "Up" = "red")) +
geom_hline(yintercept = -log10(0.05), linetype = "dashed") +
geom_vline(xintercept = c(-1, 1), linetype = "dashed") +
labs(title = "差异表达基因火山图",
x = "Log2 Fold Change (Treat vs Control)",
y = "-Log10 P-value") +
theme_bw()
# 9. 提取显著差异基因
significant_genes <- subset(DEG_results, adj.P.Val < 0.05 & abs(logFC) > 1)
upregulated <- significant_genes[significant_genes$logFC > 1, ]
downregulated <- significant_genes[significant_genes$logFC < -1, ]
# 输出结果
cat("显著上调基因数量:", nrow(upregulated), "\n")
cat("显著下调基因数量:", nrow(downregulated), "\n")
head(significant_genes[order(significant_genes$logFC, decreasing = TRUE), ])
help(prcomp)
install.packages("rTensor")
set.seed(123)
n_genes <- 100    # 基因数量
n_metabs <- 50    # 代谢物数量
n_samples <- 30   # 样本数量
n_timepoints <- 5 # 时间点数量
gene_mat <- matrix(rnorm(n_genes * n_samples), nrow = n_genes)
gene_mat
metab_mat <- matrix(rnorm(n_metabs * n_samples), nrow = n_metabs)
time_info <- sample(1:n_timepoints, n_samples, replace = TRUE)
time_info
tensor_data <- array(NA, dim = c(n_genes, n_metabs, n_timepoints))
tensor_data
for (t in 1:n_timepoints) {
# 获取当前时间点的样本索引
sample_idx <- which(time_info == t)
if (length(sample_idx) > 0) {
# 计算基因-代谢物相关性（示例：使用简单外积）
cor_mat <- cor(t(gene_mat[, sample_idx]), t(metab_mat[, sample_idx]))
tensor_data[, , t] <- cor_mat
}
}
tensor_data
gene_metab_time_tensor <- as.tensor(tensor_data)
install.packages("NMF")
library(NMF)
library(pheatmap)
library(ggplot2)
library(reshape2)
help(diff)
help(range)
a = as.matrix(data.frame(a=c(1,2),b = c(2,4)))
b=a
cor
cor(a,b,method = "pearson")
round(35534.53,4)
round
help(round)
install.packages("optparse")
paste(c(11,22), collapse = " vs ")
help(file.create)
file.create("Z:/aaa.log")
help(Sys.chmod)
help(save)
help(load)
help(system.file)
system.file()
system.file("aaa.txt")
system.file("aaa.txt", mustWork = TRUE)
system.file("aaa.txt", mustWork = FALSE)
R.home()
help(system.file)
setwd("G:/GCModeller/src/workbench/pkg/test/zero_test")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
setwd("G:/GCModeller/src/workbench/pkg/test/zero_test")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
setwd("G:/GCModeller/src/workbench/pkg/test/zero_test")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
source("G:/GCModeller/src/workbench/pkg/test/zero_test/sim.R")
